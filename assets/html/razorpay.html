<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Razorpay Payment</title>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const keyId = urlParams.get('key_id');
        const amount = urlParams.get('amount');
        const orderId = urlParams.get('order_id');
        const description = urlParams.get('description');
        const prefillName = urlParams.get('prefill_name');
        const prefillEmail = urlParams.get('prefill_email');
        const prefillContact = urlParams.get('prefill_contact');

        const options = {
            key: keyId,
            amount: amount,
            currency: 'INR',
            name: 'AgStore',
            description: description,
            order_id: orderId,
            handler: function (response) {
                window.ReactNativeWebView.postMessage(JSON.stringify({
                    status: 'success',
                    razorpay_payment_id: response.razorpay_payment_id,
                    razorpay_order_id: response.razorpay_order_id,
                    razorpay_signature: response.razorpay_signature
                }));
            },
            prefill: {
                name: prefillName,
                email: prefillEmail,
                contact: prefillContact
            },
            theme: {
                color: '#22c55e'
            }
        };

        const rzp = new Razorpay(options);
        rzp.on('payment.failed', function (response) {
            window.ReactNativeWebView.postMessage(JSON.stringify({
                status: 'failed',
                code: response.code,
                description: response.description,
                source: response.source,
                step: response.step,
                reason: response.reason,
                metadata: response.metadata
            }));
        });

        rzp.open();
    </script>
</body>
</html>